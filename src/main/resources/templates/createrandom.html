<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
	<title>随机数生成</title>
	<!--时间css start-->
	<link th:href="@{/css/bootstrap-datetimepicker.css}" rel="stylesheet">
	<link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" type="text/css" media="screen" />
	<!--时间css end-->
	<link th:href="@{/css/animate.min.css}" rel="stylesheet">
	<link th:href="@{/css/prettify-1.0.css}" rel="stylesheet">
	<link th:href="@{/css/base.css}" rel="stylesheet">
	<link th:href="@{/css/default.css}" rel="stylesheet" type="text/css">
	<!--时间js start-->
	<script th:src="@{/js/jquery-2.1.1.min.js}" type="text/javascript"></script>
	<script th:src="@{/js/bootstrap.min.js}" type="text/javascript"></script>
	<script th:src="@{/js/moment-with-locales.js}"></script>
	<script th:src="@{/js/bootstrap-datetimepicker.js}"></script>
	<!--时间js end-->
	<style>
		.box{
			margin: 15px 0;
		}
		input{
			width: 200px;
			height: 34px;
			border: 1px solid #ccc;
			border-radius: 5px;
			text-indent: 2em;
		}
		button{
			width: 60px;
			height: 30px;
			border: none;
			border-radius: 3px;
			background-color: #08c;
			color: #fff;
		}
		.container{
			display: inline-block;
			height: 30px;
			padding: 0;
			width: 190px;
		}
		.col-sm-6{
			margin-left: 5px;
			padding-left: 5px;
		}
		.input-group{
			width: 200px;
		}
		.article{
			display: inline-block;
			vertical-align: top;
			padding-top: 5px;
		}
		.row{
			width: 200px;
		}
		.divide{
			display: inline;
			padding: 0 10px;
			vertical-align: top;
		}
		.inputbbox{
			display: inline-block
		}
		.inputsboxtwo,.inputsboxthree{
			display: none;
		}
		.bigbox{
			width: 500px;
			margin:100px auto 0;
		}
	</style>
</head>
<body>
	<div class="bigbox">
		<h3>随机输入生成</h3>

		<div>
			<table>
				<div class="box"><span class="article">商品类目：</span>
					<!-- 时间选择框 -->
					<div class="inputbbox">

						<div class="inputsbox">
							<div class="container">
								<div class="row">
									<div class='col-sm-6'>
										<div class="form-group">
											<div class='input-group date' >
												<input type='text' class="form-control" id='datetimepicker3' placeholder="必选" required/>
												<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
												</span>
											</div>
										</div>
									</div>
									<script type="text/javascript">
										$(function () {
											$('#datetimepicker3').datetimepicker({
												locale: 'zh-cn',viewMode: 'days',format: 'YYYY-MM-DD'
											});
										});
									</script>
								</div>
							</div>
				
							<span class="divide">——</span>
				
							<div class="container">
								<div class="row">
									<div class='col-sm-6'>
										<div class="form-group">
											<div class='input-group date' >
												<input type='text' class="form-control" id='datetimepicker4'/>
												<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
												</span>
											</div>
										</div>
									</div>
									<script type="text/javascript">
										$(function () {
											$('#datetimepicker4').datetimepicker({
												locale: 'zh-cn',viewMode: 'days',format: 'YYYY-MM-DD'
											});
											console.log($('#datetimepicker4').val())
										});
									</script>
								</div>
							</div>
						</div>
						
						<div class="inputsboxtwo" id="inputsboxtwo">
							<div class="container">
								<div class="row">
									<div class='col-sm-6'>
										<div class="form-group">
											<div class='input-group date' >
												<input type='text' class="form-control" id='datetimepicker5'/>
												<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
												</span>
											</div>
										</div>
									</div>
									<script type="text/javascript">
										$(function () {
											$('#datetimepicker5').datetimepicker({
												locale: 'zh-cn',viewMode: 'days',format: 'YYYY-MM-DD'
											});
										});
									</script>
								</div>
							</div>
				
							<span class="divide">——</span>
				
							<div class="container">
								<div class="row">
									<div class='col-sm-6'>
										<div class="form-group">
											<div class='input-group date' >
												<input type='text' class="form-control" id='datetimepicker6'/>
												<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
												</span>
											</div>
										</div>
									</div>
									<script type="text/javascript">
										$(function () {
											$('#datetimepicker6').datetimepicker({
												locale: 'zh-cn',viewMode: 'days',format: 'YYYY-MM-DD'
											});
										});
									</script>
								</div>
							</div>
						</div>

						<div class="inputsboxthree" id="inputsboxthree">
							<div class="container">
								<div class="row">
									<div class='col-sm-6'>
										<div class="form-group">
											<div class='input-group date' >
												<input type='text' class="form-control" id='datetimepicker7'/>
												<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
												</span>
											</div>
										</div>
									</div>
									<script type="text/javascript">
										$(function () {
											$('#datetimepicker7').datetimepicker({
												locale: 'zh-cn',viewMode: 'days',format: 'YYYY-MM-DD'
											});
										});
									</script>
								</div>
							</div>
				
							<span class="divide">——</span>
				
							<div class="container">
								<div class="row">
									<div class='col-sm-6'>
										<div class="form-group">
											<div class='input-group date' >
												<input type='text' class="form-control" id='datetimepicker8'/>
												<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span>
												</span>
											</div>
										</div>
									</div>
									<script type="text/javascript">
										$(function () {
											$('#datetimepicker8').datetimepicker({
												locale: 'zh-cn',viewMode: 'days',format: 'YYYY-MM-DD'
											});
										});
									</script>
								</div>
							</div>
						</div>

					</div>
				</div>
				<div class="box">
					商品类目：<select id="product">
						<option value="1">水产A礼包</option>
						<option value="2">水产B礼包</option>
						<option value="3">水产C礼包</option>
						<option value="4">水果A礼包</option>
						<option value="5">水果B礼包</option>
						<option value="6">水果C礼包</option>
					</select>
				</div>
				<button class="but" type="button" id="affirm">确认</button>

				
			</table>
		</div>
	</div>


</body>

<script>

	$("#affirm").click(function(){
		var input3 = $('#datetimepicker3').val();
		var input4 = $('#datetimepicker4').val();
		var input5 = $('#datetimepicker5').val();
		var input6 = $('#datetimepicker6').val();
		var input7 = $('#datetimepicker7').val();
		var input8 = $('#datetimepicker8').val();
		var myDate = new Date;
		var year = myDate.getFullYear();
		var mon = ("0"+(myDate.getMonth()+1)).slice(-2);
		var date = ("0"+myDate.getDate()).slice(-2);
		var datatime = year+"-"+mon+"-"+date


		var trophy = $("#product").val()




		//console.log($("#product").val())	// 所选礼包种类
		var time

		// 判断相邻两时间是否都填或者都不填，并输出填写日期字符串
		if(input3<datatime){
			alert("选择的时间应该大于当前时间")
		}else if(input3.length != 0 && input4.length == 0){
			alert("请填写截止日期")
		}else if(input3.length != 0 && input4.length != 0){
			if(input5.length == 0){
				 time = input3+"/"+input4;
				console.log(time)
			}else if(input5.length != 0 && input6.length == 0){
				alert("请填写截止日期")
			}else if(input5.length != 0 && input6.length != 0){
				if(input7.length == 0){
					time = input3+"/"+input4+"/"+input5+"/"+input6;
					console.log(time)
				}else if(input7.length != 0 && input8.length == 0){
					alert("请填写截止日期")
				}else if(input5.length != 0 && input6.length != 0){
					 time = input3+"/"+input4+"/"+input5+"/"+input6+"/"+input7+"/"+input8;
					console.log(time)
				}
			}
		}

		$.ajax({
			type:"GET",
			url:"/random/generation",
			data:{
				"trophy":trophy,
				"validDate":time
			},
			//dataType:json,
			//跨域请求

			success:function(data) {
				if(data.msg =="success"){
					alert("随机数生成完成,你已成功生成五百条数据");
				}
				else {
					alert("随机数生成失败，原因是："+data.msg);
				}
			},

			//以下的error是网络请求出现异常才捕获到的，当服务端处理时都是返回到以上的success或者error
			error:function(data){
				 alert("随机数生成失败，请查看您的网络是否正常");
			}
		});
	})



	$(document).ready(function(){

		// 失去焦点判断
		$('#datetimepicker3').blur(function(){
			var input3 = $('#datetimepicker3').val();
			var myDate = new Date;
			var year = myDate.getFullYear();
			var mon = ("0"+(myDate.getMonth()+1)).slice(-2);
			var date = ("0"+myDate.getDate()).slice(-2);
			var datatime = year+"-"+mon+"-"+date
			console.log(("0"+(myDate.getDate())))
			console.log(myDate)
			console.log(datatime)
			console.log(input3)
			if(input3<datatime){
				alert("选择的时间应该大于当前时间")
			}else{
				console.log(input3)
			}
		})
		$('#datetimepicker4').blur(function(){
			var input3 = $('#datetimepicker3').val();
			var input4 = $('#datetimepicker4').val();
			if(input4<input3){
				alert("选择的时间应该大于当前时间")
			}else{
				$('#inputsboxtwo').css("display","block");
				console.log(input3,input4)
			}
		})
		$('#datetimepicker5').blur(function(){
			var input5 = $('#datetimepicker5').val();
			var input4 = $('#datetimepicker4').val();
			if(input5<input4){
				alert("选择的时间应该大于当前时间")
			}
		})
		$('#datetimepicker6').blur(function(){
			var input5 = $('#datetimepicker5').val();
			var input6 = $('#datetimepicker6').val();
			if(input6<input5){
				alert("选择的时间应该大于当前时间")
			}else{
				$('#inputsboxthree').css("display","block");
				console.log(input5,input6)
			}
		})
		$('#datetimepicker7').blur(function(){
			var input6 = $('#datetimepicker6').val();
			var input7 = $('#datetimepicker7').val();
			if(input7<input6){
				alert("选择的时间应该大于当前时间")
			}
		})
		$('#datetimepicker8').blur(function(){
			var input7 = $('#datetimepicker7').val();
			var input8 = $('#datetimepicker8').val();
			if(input8<input7){
				alert("选择的时间应该大于当前时间")
			}else{
				console.log(input7,input8)
			}
		})



	})

</script>
</html>